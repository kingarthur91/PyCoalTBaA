
--angel mods
require('prototypes/angels-mods/Data-Final-Fixes')

--bobs mods
require('prototypes/bobs-mods/Data-Final-Fixes')

--madclown mods
require('prototypes/madclowns-mods/data-fixes')

--biomass recipes
--require('biomass-recipes')

fun.global_item_replacer('coke', 'solid-coke')
fun.global_item_replacer('limestone', 'solid-limestone')
fun.global_item_replacer('acidgas', 'gas-acid')
fun.global_item_replacer('salt', 'solid-salt')
fun.global_item_replacer('sand', 'solid-sand')
fun.global_item_replacer('syngas', 'gas-synthesis')
fun.global_item_replacer('methanol', 'gas-methanol')
fun.global_item_replacer('carbon-dioxide', 'gas-carbon-dioxide')
fun.global_item_replacer('carbon', 'solid-carbon')
fun.global_item_replacer('lime', 'solid-lime')
fun.global_item_replacer('angels-plate-chrome', 'chromium')
fun.global_item_replacer('solid-clay', 'clay')
fun.global_item_replacer('phenolic-board', 'phenolicboard')
fun.global_item_replacer('fibreglass-board', 'fiberglass')
fun.global_item_replacer('fertiliser', 'py-fertilizer')
fun.global_item_replacer('solid-fertilizer', 'py-fertilizer')
fun.global_item_replacer('benzene', 'gas-benzene')
fun.global_item_replacer('propene', 'gas-propene')
fun.global_item_replacer('acetone', 'gas-acetone')
fun.global_item_replacer('chloromethane', 'gas-chlor-methane')
fun.global_item_replacer('methane', 'gas-methane')
fun.global_item_replacer('methanal', 'gas-formaldehyde')
fun.global_item_replacer('ammonia', 'gas-ammonia')
fun.global_item_replacer('ech', 'gas-epichlorhydrin')
fun.global_item_replacer('ethylene', 'gas-ethylene')
fun.global_item_replacer('glass-fiber', 'angels-coil-glass-fiber')
fun.global_item_replacer('wooden-board', 'fiberboard')
fun.global_item_replacer('advanced-processing-unit', 'intelligent-unit')
fun.global_item_replacer('superior-circuit-board', 'intelligent-unit')
fun.global_item_replacer('electronic-components', 'transistor')
fun.global_item_replacer('basic-electronic-components', 'resistor2')
fun.global_item_replacer('processing-electronics', 'kondo-processor')
fun.global_item_replacer('intergrated-electronics', 'microchip')
fun.global_item_replacer('module-processor-board', 'pcb2')
fun.global_item_replacer('module-processor-board-2', 'pcb3')
fun.global_item_replacer('module-processor-board-3', 'pcb4')
fun.global_item_replacer('multi-layer-circuit-board', 'pcb4')
fun.global_item_replacer('solid-sodium-chlorate', 'sodium-chlorate')
fun.global_item_replacer('black-liquor', 'liquid-black-liquor')
fun.global_item_replacer('acetic-acid', 'liquid-acetic-acid')
fun.global_item_replacer('bio-raw-meat', 'meat')
fun.global_item_replacer('liquid-molten-aluminium', 'molten-aluminium')
fun.global_item_replacer('liquid-molten-copper', 'molten-copper')
fun.global_item_replacer('liquid-molten-iron', 'molten-iron')
fun.global_item_replacer('liquid-molten-lead', 'molten-lead')
fun.global_item_replacer('liquid-molten-silver', 'molten-silver')
fun.global_item_replacer('liquid-molten-nickel', 'molten-nickel')
fun.global_item_replacer('liquid-molten-steel', 'molten-steel')
fun.global_item_replacer('liquid-molten-tin', 'molten-tin')
fun.global_item_replacer('liquid-molten-titanium', 'molten-titanium')
fun.global_item_replacer('liquid-molten-zinc', 'molten-zinc')
fun.global_item_replacer('liquid-molten-chrome', 'molten-chromium')
fun.global_item_replacer('hydrogen', 'gas-hydrogen')
fun.global_item_replacer('chlorine', 'gas-chlorine')
fun.global_item_replacer('oxygen', 'gas-oxygen')
fun.global_item_replacer('nitrogen', 'gas-nitrogen')
fun.global_item_replacer('hydrogen-chloride', 'gas-hydrogen-chloride')
fun.global_item_replacer('solid-salt', 'salt')
fun.global_item_replacer('solid-sodium-carbonate', 'sodium-carbonate')
fun.global_item_replacer('solid-sodium-hydroxide', 'sodium-hydroxide')
fun.global_item_replacer('solid-sodium-sulfate', 'sodium-sulfate')
fun.global_item_replacer('liquid-fuel-oil', 'fuel-oil')
fun.global_item_replacer('glycerol', 'liquid-glycerol')
-- fun.global_item_replacer('petri-dish', 'empty-petri-dish')
fun.global_item_replacer('basic-circuit-board', 'pcb1')
fun.global_item_replacer('centrifuge', 'centrifuge-mk01')
fun.global_item_replacer('centrifuge-2', 'centrifuge-mk02')
fun.global_item_replacer('centrifuge-3', 'centrifuge-mk03')
fun.global_item_replacer('bob-valve', 'py-check-valve')
fun.global_item_replacer('bob-overflow-valve', 'py-overflow-valve')
fun.global_item_replacer('bob-topup-valve', 'py-underflow-valve')
fun.global_item_replacer('construction-robot', 'py-construction-robot-01')
fun.global_item_replacer('washing-plant', 'washer')
fun.global_item_replacer('filtration-unit', 'carbon-filter')
fun.global_item_replacer('filtration-unit-2', 'carbon-filter-mk02')
fun.global_item_replacer('filtration-unit-3', 'carbon-filter-3')
fun.global_item_replacer('washing-plant', 'washer')
fun.global_item_replacer('washing-plant-2', 'washer-mk02')
fun.global_item_replacer('ore-floatation-cell', 'flotation-cell-mk01')
fun.global_item_replacer('ore-floatation-cell-2', 'flotation-cell-mk02')
fun.global_item_replacer('ore-floatation-cell-3', 'flotation-cell-mk03')
fun.global_item_replacer('ore-leaching-plant', 'leaching-station-mk01')
fun.global_item_replacer('ore-leaching-plant-2', 'leaching-station-mk02')
fun.global_item_replacer('ore-leaching-plant-3', 'leaching-station-mk03')
fun.global_item_replacer('barreling-pump', 'barrel-machine')
fun.global_item_replacer('silicon','angels-mono-silicon')
fun.global_item_replacer('wood-charcoal','charcoal-briquette')
fun.global_item_replacer('resin','saps')
fun.global_item_replacer('solid-soil','soil')
fun.global_item_replacer('pressured-air','gas-compressed-air')
fun.global_item_replacer('pcb1','circuit-red')
fun.global_item_replacer('cellulose','cellulose-fiber')
fun.global_item_replacer('quartz-crucible','angels-quartz-crucible')
--aluminium
fun.global_item_replacer('ore-aluminium','bauxite-ore')
fun.global_item_replacer('aluminium-plate','angels-plate-aluminium')
--chrome
fun.global_item_replacer('ore-chromium','chrome-ore')
--lead
fun.global_item_replacer('ore-lead','lead-ore')
fun.global_item_replacer('lead-plate','angels-plate-lead')
--nickel
fun.global_item_replacer('ore-nickel','nickel-ore')
fun.global_item_replacer('nickel-plate','angels-plate-nickel')
--tin
fun.global_item_replacer('ore-tin','tin-ore')
fun.global_item_replacer('tin-plate','angels-plate-tin')
--zinc
fun.global_item_replacer('ore-zinc','zinc-ore')
fun.global_item_replacer('zinc-plate','angels-plate-zinc')


fun.global_prereq_replacer('electronics', 'vacuum-tube-electronics')
fun.global_prereq_replacer('washing-1', 'soil-washing')

-- Fluid Converter Recipes
if mods['angelspetrochem'] then
    angelsmods.functions.make_converter('acidgas', 'gas-acid')
    angelsmods.functions.make_converter('syngas', 'gas-synthesis')
    angelsmods.functions.make_converter('methanol', 'gas-methanol')
    angelsmods.functions.make_converter('carbon-dioxide', 'gas-carbon-dioxide')
    angelsmods.functions.make_converter('gas-benzene', 'benzene')
    angelsmods.functions.make_converter('gas-propene', 'propene')
    angelsmods.functions.make_converter('chloromethane', 'gas-chlor-methane')
    angelsmods.functions.make_converter('methane', 'gas-methane')
    angelsmods.functions.make_converter('ammonia', 'gas-ammonia')
    angelsmods.functions.make_converter('ech', 'gas-epichlorhydrin')
    angelsmods.functions.make_converter('black-liquor', 'liquid-black-liquor')
    angelsmods.functions.make_converter('acetic-acid', 'liquid-acetic-acid')
    angelsmods.functions.make_converter('liquid-fuel-oil', 'fuel-oil')
    angelsmods.functions.make_converter('glycerol', 'liquid-glycerol')
end

--recipe ingredients deduper

for i, ings in pairs(data.raw.recipe) do
    --log(serpent.block(ings))
    local inglist = {}
    if ings.ingredients ~= nil then
        for a, ing in pairs(ings.ingredients) do
            if ing.name ~= nil then
                if data.raw.item[ing.name] or data.raw.fluid[ing.name] or data.raw.module[ing.name] or data.raw.tool[ing.name] or data.raw.ammo[ing.name] then
                    if not inglist[ing.name] then
                        --log(serpent.block(ing))
                        --log(ing.name)
                        inglist[ing.name] = true
                    else
                        data.raw.recipe[ings.name].ingredients[a] = nil
                    end
                else
                    data.raw.recipe[ings.name].ingredients[a] = nil
                end
            elseif type(ing[1]) == 'string' then
                --log(serpent.block(ing))
                if not inglist[ing[1]] then
                    inglist[ing[1]] = true
                else
                    data.raw.recipe[ings.name].ingredients[a] = nil
                end
            end
        end
    end

    if ings.normal ~= nil then
        --log(serpent.block(ings))
        for a, ing in pairs(ings.normal.ingredients) do
            if ing.name ~= nil then
                if data.raw.item[ing.name] or data.raw.fluid[ing.name] or data.raw.module[ing.name] or data.raw.tool[ing.name] or data.raw.ammo[ing.name] then
                    if not inglist[ing.name] then
                        --log(serpent.block(ing))
                        --log(ing.name)
                        inglist[ing.name] = true
                    else
                        data.raw.recipe[ings.name].normal.ingredients[a] = nil
                    end
                else
                    data.raw.recipe[ings.name].normal.ingredients[a] = nil
                end
            elseif type(ing[1]) == 'string' then
                --log(serpent.block(ing))
                if not inglist[ing[1]] then
                    inglist[ing[1]] = true
                else
                    data.raw.recipe[ings.name].normal.ingredients[a] = nil
                end
            end
        end
    end
    --reset inglist for expensive ingredients
    inglist = {}

    if ings.expensive ~= nil then
        --log(serpent.block(ings))
        --log(serpent.block(ings.expensive))
        if ings.expensive ~= false then
            if ings.expensive.ingredients ~= nil then
                for a, ing in pairs(ings.expensive.ingredients) do
                    if ing.name ~= nil then
                        if data.raw.item[ing.name] or data.raw.fluid[ing.name] or data.raw.module[ing.name] or data.raw.tool[ing.name] or data.raw.ammo[ing.name] then
                            if not inglist[ing.name] then
                                --log(serpent.block(ing))
                                --log(ing.name)
                                inglist[ing.name] = true
                            else
                                data.raw.recipe[ings.name].expensive.ingredients[a] = nil
                            end
                        else
                            data.raw.recipe[ings.name].expensive.ingredients[a] = nil
                        end
                    elseif type(ing[1]) == 'string' then
                        --log(serpent.block(ing))
                        if not inglist[ing[1]] then
                            inglist[ing[1]] = true
                        else
                            data.raw.recipe[ings.name].expensive.ingredients[a] = nil
                        end
                    end
                end
            end
        end
    end
end

data.raw.item['electronic-circuit'].icon_size = 64
data.raw.item['electronic-circuit'].icon = "__pyhightechgraphics__/graphics/icons/circuit-board-1.png"
data.raw.item['advanced-circuit'].icon_size = 64
data.raw.item['advanced-circuit'].icon = "__pyhightechgraphics__/graphics/icons/circuit-board-2.png"
data.raw.item['processing-unit'].icon_size = 64
data.raw.item['processing-unit'].icon = "__pyhightechgraphics__/graphics/icons/circuit-board-3.png"
data.raw.item['intelligent-unit'].icon_size = 32
data.raw.item['intelligent-unit'].icon = "__pyhightechgraphics__/graphics/icons/intelligent-unit.png"